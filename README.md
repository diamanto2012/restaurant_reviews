# Приложение для сбора отзывов о ресторанах

REST API для сбора и управления отзывами о ресторанах. Приложение предоставляет респондентам доступ к списку ресторанов и созданию отзывов, а администраторам - возможности менеджмента ресторанов и выгрузки отчетов.

## Технологии

- Flask
- SQLAlchemy
- Alembic
- JWT-авторизация
- Swagger

## Роли пользователей

### Администратор

- Управление пользователями (CRUD)
- Управление ресторанами (CRUD)
- Выгрузка сводного отчета по всем ресторанам
- Просмотр всех отзывов

### Респондент

- Регистрация и получение своих данных
- Просмотр списка ресторанов
- Создание отзывов (по одному на ресторан)
- Просмотр своих отзывов

## Установка и запуск

1. Клонировать репозиторий:
```
git clone <url-репозитория>
cd <папка-проекта>
```

2. Создать и активировать виртуальное окружение:
```
python -m venv venv
venv\Scripts\activate  # для Windows
source venv/bin/activate  # для Linux/Mac
```

3. Установить зависимости:
```
pip install -r requirements.txt
```

4. Настроить переменные окружения (или использовать файл .env):
```
FLASK_APP=run.py
FLASK_ENV=development
SECRET_KEY=your-secret-key-here
DATABASE_URI=sqlite:///restaurant_reviews.db
JWT_SECRET_KEY=your-jwt-secret-key-here
```

5. Создать базу данных и применить миграции:
```
flask db upgrade
```

6. Запустить приложение:
```
flask run
```

## API Документация

API документация доступна по адресу `/api/docs` после запуска приложения.

### Основные эндпоинты

#### Аутентификация
- `POST /api/v1/auth/register` - Регистрация нового пользователя (респондента)
- `POST /api/v1/auth/login` - Вход в систему (получение JWT токена)

#### Пользователи
- `GET /api/v1/users` - Получение списка пользователей (только для администраторов)
- `POST /api/v1/users` - Создание нового пользователя (только для администраторов)
- `GET /api/v1/users/{user_id}` - Получение данных пользователя
- `PUT /api/v1/users/{user_id}` - Обновление данных пользователя (только для администраторов)
- `DELETE /api/v1/users/{user_id}` - Удаление пользователя (только для администраторов)

#### Рестораны
- `GET /api/v1/restaurants` - Получение списка ресторанов
- `POST /api/v1/restaurants` - Создание нового ресторана (только для администраторов)
- `GET /api/v1/restaurants/{restaurant_id}` - Получение данных ресторана
- `PUT /api/v1/restaurants/{restaurant_id}` - Обновление данных ресторана (только для администраторов)
- `DELETE /api/v1/restaurants/{restaurant_id}` - Удаление ресторана (только для администраторов)
- `GET /api/v1/restaurants/report` - Выгрузка сводного отчета (только для администраторов)

#### Отзывы
- `GET /api/v1/reviews` - Получение списка отзывов
- `POST /api/v1/reviews` - Создание нового отзыва
- `GET /api/v1/reviews/{review_id}` - Получение данных отзыва
